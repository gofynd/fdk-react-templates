!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@react-google-maps/api"),require("fdk-core/utils"),require("react"),require("react-google-autocomplete")):"function"==typeof define&&define.amd?define("firestone",["@react-google-maps/api","fdk-core/utils","react","react-google-autocomplete"],t):"object"==typeof exports?exports.firestone=t(require("@react-google-maps/api"),require("fdk-core/utils"),require("react"),require("react-google-autocomplete")):e.firestone=t(e["@react-google-maps/api"],e["fdk-core/utils"],e.react,e["react-google-autocomplete"])}("undefined"!=typeof self?self:this,(e,t,o,a)=>(()=>{"use strict";var r={447:e=>{e.exports=t},1758:(e,t,o)=>{o.d(t,{A:()=>n});var a,r,l=o(9155);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)({}).hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},_extends.apply(null,arguments)}const n=function SvgSearch(e){return l.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"inherit"},e),a||(a=l.createElement("g",{clipPath:"url(#search_svg__a)"},l.createElement("path",{d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}))),r||(r=l.createElement("defs",null,l.createElement("clipPath",{id:"search_svg__a"},l.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))}},4180:t=>{t.exports=e},8536:e=>{e.exports=a},8564:(e,t,o)=>{o.d(t,{A:()=>l});var a,r=o(9155);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)({}).hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},_extends.apply(null,arguments)}const l=function SvgLocate(e){return r.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),a||(a=r.createElement("path",{fill:"currentColor",d:"M11 22.95v-2q-3.125-.35-5.361-2.587Q3.4 16.125 3.05 13h-2v-2h2q.35-3.125 2.588-5.363Q7.875 3.399 11 3.05v-2h2v2q3.124.35 5.363 2.587Q20.6 7.875 20.95 11h2v2h-2q-.35 3.124-2.587 5.363Q16.126 20.6 13 20.95v2zM12 19q2.901 0 4.95-2.05T19 12q0-2.901-2.05-4.95T12 5Q9.1 5 7.05 7.05T5 12t2.05 4.95T12 19m0-3q-1.649 0-2.824-1.175T8 12q0-1.65 1.175-2.825T12 8t2.825 1.175T16 12t-1.175 2.825T12 16m0-2q.825 0 1.414-.588Q14 12.824 14 12q0-.825-.587-1.413A1.93 1.93 0 0 0 12 10q-.825 0-1.412.587A1.93 1.93 0 0 0 10 12q0 .824.588 1.412Q11.176 14 12 14"})))}},9155:e=>{e.exports=o}},l={};function __webpack_require__(e){var t=l[e];if(void 0!==t)return t.exports;var o=l[e]={exports:{}};return r[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};__webpack_require__.r(n),__webpack_require__.d(n,{default:()=>google_map});var s=__webpack_require__(9155),c=__webpack_require__.n(s),i=__webpack_require__(4180),_=__webpack_require__(8536),u=__webpack_require__.n(_),p=__webpack_require__(1758),d=__webpack_require__(8564),g=__webpack_require__(447);const m=["places"],y={width:"100%",height:"300px"},f={width:"100%",height:"40px",borderRadius:"8px",padding:"0px 30px",border:"none"},google_map=({mapApiKey:e,onAddressSelect:t,countryDetails:o,addressItem:a,onLoad:r=()=>{}})=>{const{t:l}=(0,g.useGlobalTranslation)("translation"),[n,_]=(0,s.useState)({lat:o?.latitude,lng:o?.longitude}),[b,h]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),[q,k]=(0,s.useState)(""),[E,x]=(0,s.useState)(""),[S,j]=(0,s.useState)(""),[A,N]=(0,s.useState)(""),[T,C]=(0,s.useState)(o?.display_name||"India"),O=(0,s.useRef)(null),M=(0,s.useRef)(null),P=(0,s.useRef)(!1),$=(0,s.useRef)(null),L=!a,{isLoaded:Q}=(0,i.useJsApiLoader)({googleMapsApiKey:e,libraries:m});function selectAddress(e){t(e||{city:v,area_code:E,state:q,area:S,address:A,country:T,geo_location:{latitude:n?.lat,longitude:n?.lng}})}(0,s.useEffect)(()=>{if(a?.geo_location){const e={lat:Number(a?.geo_location?.latitude),lng:Number(a?.geo_location?.longitude)};_(e),M?.current?.panTo(e)}else{const e={lat:Number(o?.latitude),lng:Number(o?.longitude)};_(e),M?.current?.panTo(e)}},[o,a]);const R=(0,s.useCallback)(e=>{if(e?.geometry){const t=e?.geometry?.location,o=t.lat(),a=t.lng();_({lat:o,lng:a}),h(e.formatted_address);let r=e?.address_components?.find(e=>e?.types?.includes("premise"));N(r?.long_name||""),getCityAndState(o,a)}else console.error("No geometry available for selected place")},[]),getCityAndState=async(t,o)=>{try{const a=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${o}&key=${e}`),r=(await a.json()).results[0].address_components;!function stateReset(){x(""),w(""),j(""),k("")}();let l=[],n="",s=T||"",c="",i="",_="";r.forEach(e=>{e.types.includes("plus_code")||e.types.includes("premise")?n=e.long_name:e.types.includes("street_number")?n=`${n}${e.long_name}`:e.types.includes("country")?s=e.long_name:e.types.includes("locality")?c=e.long_name:e.types.includes("administrative_area_level_1")?i=e.long_name:e.types.includes("postal_code")?_=e.long_name:(e.types.includes("sublocality")||e.types.includes("sublocality_level_1")||e.types.includes("sublocality_level_2"))&&l.push(e.long_name)});const u=l.join(", ");N(n),C(s),w(c),k(i),x(_),j(u),selectAddress({city:c,area_code:_,state:i,area:u,address:n,country:s,geo_location:{latitude:t,longitude:o}})}catch(e){console.error("Error fetching city and state:",e)}},getAddressFromLatLng=async(t,o)=>{try{const a=`${Number(t).toFixed(6)},${Number(o).toFixed(6)}`;if($.current===a)return;const r=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${o}&key=${e}`),l=await r.json();let n=[];if(l.results&&l.results.length>0){const e=l.results[0];h(e.formatted_address);let r=t,s=o;if(e?.geometry){const t=e?.geometry?.location;r=t.lat,s=t.lng,_({lat:r,lng:s})}let c="",i=T||"",u="",p="",d="";e.address_components.forEach(e=>{e.types.includes("premise")&&(c=e.long_name),e.types.includes("country")&&(i=e.long_name),e.types.includes("locality")&&(u=e.long_name),e.types.includes("administrative_area_level_1")&&(p=e.long_name),e.types.includes("postal_code")&&(d=e.long_name),(e.types.includes("sublocality")||e.types.includes("sublocality_level_1")||e.types.includes("sublocality_level_2"))&&n.push(e.long_name)});const g=n.join(", ");N(c),C(i),w(u),k(p),x(d),j(g),selectAddress({city:u,area_code:d,state:p,area:g,address:c,country:i,geo_location:{latitude:r,longitude:s}}),$.current=a}}catch(e){console.error("Error fetching address:",e)}},z=(0,s.useCallback)(e=>{const t=e.latLng.lat(),o=e.latLng.lng();_({lat:t,lng:o}),getAddressFromLatLng(t,o)},[]),handleLocationError=e=>{console.error(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")};return(0,s.useEffect)(()=>{Q&&L&&(P.current||(P.current=!0,n?.lat&&n?.lng&&getAddressFromLatLng(n.lat,n.lng)))},[Q]),c().createElement("div",{className:"google-map__mapAddress___lLOgh"},c().createElement("div",{className:"google-map__mapWrapper___YR7HM",style:y},Q?c().createElement("div",null,c().createElement("div",{ref:O,className:"google-map__autoCompleteWrap___aXAcB",style:{display:!Q&&"none"}},c().createElement(p.A,{className:"google-map__searchAutoIcon___pczP8"}),c().createElement(u(),{placeholder:l("resource.localization.search_google_maps"),apiKey:e,style:f,onPlaceSelected:R,options:{types:["geocode","establishment"],componentRestrictions:{country:o?.iso2}},onClick:e=>{e.stopPropagation()}})),c().createElement("div",{className:"google-map__mapCompWrap___kgcWp",style:{display:!Q&&"none"}},c().createElement(i.GoogleMap,{mapContainerStyle:y,center:n,zoom:n?15:10,options:{fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1},onLoad:e=>{M.current=e,r(e)}},n&&c().createElement(i.Marker,{position:n,draggable:!0,onDragEnd:z})),c().createElement("button",{title:l("resource.localization.detect_my_location"),onClick:()=>{navigator?.geolocation?navigator?.geolocation?.getCurrentPosition(e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};_(t),getAddressFromLatLng(t.lat,t.lng),M?.current?.panTo(t)},()=>{handleLocationError(!0)}):handleLocationError(!1)},className:"google-map__locateIconBtn___DmBgQ"},c().createElement(d.A,{className:"google-map__locateIcon___O8k2g"})))):c().createElement("div",{className:"google-map__skeleton___whDH9"},c().createElement("canvas",null))),b&&c().createElement("div",{className:"google-map__addressSelect___rga6h"},c().createElement("p",null,b)))};return n})());
!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@react-google-maps/api"),require("fdk-core/utils"),require("react"),require("react-google-autocomplete")):"function"==typeof define&&define.amd?define("firestone",["@react-google-maps/api","fdk-core/utils","react","react-google-autocomplete"],t):"object"==typeof exports?exports.firestone=t(require("@react-google-maps/api"),require("fdk-core/utils"),require("react"),require("react-google-autocomplete")):e.firestone=t(e["@react-google-maps/api"],e["fdk-core/utils"],e.react,e["react-google-autocomplete"])}("undefined"!=typeof self?self:this,((e,t,a,o)=>(()=>{"use strict";var r={8564:(e,t,a)=>{a.d(t,{A:()=>l});var o,r=a(9155);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends.apply(null,arguments)}const l=function SvgLocate(e){return r.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),o||(o=r.createElement("path",{fill:"#666",stroke:"#666",strokeWidth:.3,d:"M0 10.567h1.536a8.495 8.495 0 0 0 7.897 7.897v1.686h1.134v-1.686c4.227-.28 7.617-3.67 7.897-7.897h1.686V9.433h-1.686a8.495 8.495 0 0 0-7.897-7.897V-.15H9.433v1.686a8.495 8.495 0 0 0-7.897 7.897H-.15v1.134zm10-4.884A4.32 4.32 0 0 0 5.683 10 4.32 4.32 0 0 0 10 14.317 4.32 4.32 0 0 0 14.317 10 4.32 4.32 0 0 0 10 5.683Zm0 7.5A3.187 3.187 0 0 1 6.817 10 3.187 3.187 0 0 1 10 6.817 3.187 3.187 0 0 1 13.183 10 3.187 3.187 0 0 1 10 13.183Zm0 4.167c-4.052 0-7.35-3.297-7.35-7.35S5.948 2.65 10 2.65s7.35 3.297 7.35 7.35-3.298 7.35-7.35 7.35Z"})))}},1758:(e,t,a)=>{a.d(t,{A:()=>n});var o,r,l=a(9155);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends.apply(null,arguments)}const n=function SvgSearch(e){return l.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),o||(o=l.createElement("g",{clipPath:"url(#search_svg__a)"},l.createElement("path",{fill:"inherit",d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}))),r||(r=l.createElement("defs",null,l.createElement("clipPath",{id:"search_svg__a"},l.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))}},4180:t=>{t.exports=e},447:e=>{e.exports=t},9155:e=>{e.exports=a},8536:e=>{e.exports=o}},l={};function __webpack_require__(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return r[e](a,a.exports,__webpack_require__),a.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{__webpack_require__.r(n),__webpack_require__.d(n,{default:()=>google_map});var e=__webpack_require__(9155),t=__webpack_require__.n(e),a=__webpack_require__(4180),o=__webpack_require__(8536),r=__webpack_require__.n(o),l=__webpack_require__(1758),s=__webpack_require__(8564),c=__webpack_require__(447);const i=["places"],_={width:"100%",height:"300px"},p={width:"100%",height:"40px",borderRadius:"8px",padding:"0px 30px",border:"none"},google_map=o=>{let{mapApiKey:n,onAddressSelect:u,countryDetails:d,addressItem:g,onLoad:m=(()=>{})}=o;const{t:y}=(0,c.useGlobalTranslation)("translation"),[f,b]=(0,e.useState)(!1),[h,v]=(0,e.useState)({lat:d?.latitude,lng:d?.longitude}),[w,k]=(0,e.useState)(""),[E,x]=(0,e.useState)(""),[q,S]=(0,e.useState)(""),[j,A]=(0,e.useState)(""),[N,C]=(0,e.useState)(""),[M,O]=(0,e.useState)(""),[P,L]=(0,e.useState)("India"),T=(0,e.useRef)(null),D=(0,e.useRef)(null);(0,e.useEffect)((()=>{if(g?.geo_location){const e={lat:Number(g?.geo_location?.latitude),lng:Number(g?.geo_location?.longitude)};v(e),D?.current?.panTo(e)}else{const e={lat:Number(d?.latitude),lng:Number(d?.longitude)};v(e),D?.current?.panTo(e)}}),[d,g]);const I=(0,e.useCallback)((e=>{if(e?.geometry){const t=e?.geometry?.location,a=t.lat(),o=t.lng();v({lat:a,lng:o}),k(e.formatted_address);let r=e?.address_components?.find((e=>e?.types?.includes("premise")));O(r?.long_name||""),getCityAndState(a,o)}else console.error("No geometry available for selected place")}),[]),getCityAndState=async(e,t)=>{try{const a=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&key=${n}`),o=(await a.json()).results[0].address_components;!function stateReset(){A(""),x(""),L("India"),C(""),S("")}();let r=[];o.forEach((e=>{e.types.includes("plus_code")||e.types.includes("premise")?O(e.long_name):e.types.includes("street_number")?O((t=>t+e.long_name)):e.types.includes("country")?L(e.long_name):e.types.includes("locality")?x(e.long_name):e.types.includes("administrative_area_level_1")?S(e.long_name):e.types.includes("postal_code")?A(e.long_name):(e.types.includes("sublocality")||e.types.includes("sublocality_level_1")||e.types.includes("sublocality_level_2"))&&r.push(e.long_name),C(r.join(", "))}))}catch(e){console.error("Error fetching city and state:",e)}},getAddressFromLatLng=async(e,t)=>{try{const a=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&key=${n}`),o=await a.json();let r=[];if(o.results&&o.results.length>0){const e=o.results[0];if(k(e.formatted_address),e?.geometry){const t=e?.geometry?.location,a=t.lat,o=t.lng;v({lat:a,lng:o})}e.address_components.forEach((e=>{e.types.includes("premise")&&O(e.long_name),e.types.includes("country")&&L(e.long_name),e.types.includes("locality")&&x(e.long_name),e.types.includes("administrative_area_level_1")&&S(e.long_name),e.types.includes("postal_code")&&A(e.long_name),(e.types.includes("sublocality")||e.types.includes("sublocality_level_1")||e.types.includes("sublocality_level_2"))&&r.push(e.long_name),C(r.join(", "))}))}}catch(e){console.error("Error fetching address:",e)}},R=(0,e.useCallback)((e=>{const t=e.latLng.lat(),a=e.latLng.lng();v({lat:t,lng:a}),getAddressFromLatLng(t,a)}),[]),handleLocationError=(e,t)=>{console.error(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")};return t().createElement("div",{className:"google-map__mapAddress___lLOgh"},t().createElement("div",{className:"google-map__mapWrapper___YR7HM",style:_},t().createElement(a.LoadScript,{googleMapsApiKey:n,libraries:i},t().createElement("div",{ref:T,className:"google-map__autoCompleteWrap___aXAcB",style:{display:!f&&"none"}},t().createElement(l.A,{className:"google-map__searchAutoIcon___pczP8"}),t().createElement(r(),{placeholder:"Search Google Maps",apiKey:n,style:p,onPlaceSelected:I,options:{types:["geocode","establishment"],componentRestrictions:{country:d?.iso2}},onClick:e=>{e.stopPropagation()}})),t().createElement("div",{className:"google-map__mapCompWrap___kgcWp",style:{display:!f&&"none"}},t().createElement(a.GoogleMap,{mapContainerStyle:_,center:h,zoom:h?15:10,options:{fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1},onLoad:e=>{D.current=e,b(!0),m(e)}},h&&t().createElement(a.Marker,{position:h,draggable:!0,onDragEnd:R})),t().createElement("button",{title:"Detect My Location",onClick:()=>{navigator?.geolocation?navigator?.geolocation?.getCurrentPosition((e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};v(t),getAddressFromLatLng(t.lat,t.lng),D?.current?.panTo(t)}),(()=>{handleLocationError(!0)})):handleLocationError(!1)},className:"google-map__locateIconBtn___DmBgQ"},t().createElement(s.A,{className:"google-map__locateIcon___O8k2g"})))),!f&&t().createElement("div",{className:"google-map__skeleton___whDH9"},t().createElement("canvas",null))),w&&t().createElement("div",{className:"google-map__addressSelect___rga6h"},t().createElement("p",null,w),t().createElement("button",{onClick:function selectAddress(){u({city:E,area_code:j,state:q,area:N,address:M,country:P,geo_location:{latitude:h?.lat,longitude:h?.lng}})}},"Use This")))}})(),n})()));
!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@react-google-maps/api"),require("fdk-core/utils"),require("react"),require("react-google-autocomplete")):"function"==typeof define&&define.amd?define("firestone",["@react-google-maps/api","fdk-core/utils","react","react-google-autocomplete"],t):"object"==typeof exports?exports.firestone=t(require("@react-google-maps/api"),require("fdk-core/utils"),require("react"),require("react-google-autocomplete")):e.firestone=t(e["@react-google-maps/api"],e["fdk-core/utils"],e.react,e["react-google-autocomplete"])}("undefined"!=typeof self?self:this,((e,t,a,o)=>(()=>{"use strict";var l={8564:(e,t,a)=>{a.d(t,{A:()=>r});var o,l=a(9155);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends.apply(null,arguments)}const r=function SvgLocate(e){return l.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),o||(o=l.createElement("path",{fill:"currentColor",d:"M11 22.95v-2q-3.125-.35-5.361-2.587Q3.4 16.125 3.05 13h-2v-2h2q.35-3.125 2.588-5.363Q7.875 3.399 11 3.05v-2h2v2q3.124.35 5.363 2.587Q20.6 7.875 20.95 11h2v2h-2q-.35 3.124-2.587 5.363Q16.126 20.6 13 20.95v2zM12 19q2.901 0 4.95-2.05T19 12q0-2.901-2.05-4.95T12 5Q9.1 5 7.05 7.05T5 12t2.05 4.95T12 19m0-3q-1.649 0-2.824-1.175T8 12q0-1.65 1.175-2.825T12 8t2.825 1.175T16 12t-1.175 2.825T12 16m0-2q.825 0 1.414-.588Q14 12.824 14 12q0-.825-.587-1.413A1.93 1.93 0 0 0 12 10q-.825 0-1.412.587A1.93 1.93 0 0 0 10 12q0 .824.588 1.412Q11.176 14 12 14"})))}},1758:(e,t,a)=>{a.d(t,{A:()=>n});var o,l,r=a(9155);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends.apply(null,arguments)}const n=function SvgSearch(e){return r.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"inherit"},e),o||(o=r.createElement("g",{clipPath:"url(#search_svg__a)"},r.createElement("path",{d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}))),l||(l=r.createElement("defs",null,r.createElement("clipPath",{id:"search_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))}},958:(e,t,a)=>{a.d(t,{A:()=>r,NW:()=>l,P:()=>o,Qn:()=>i,Uu:()=>c,j2:()=>_,mB:()=>n,qV:()=>u,v0:()=>s});var o="google-map__addressSelect___rga6h",l="google-map__autoCompleteWrap___aXAcB",r="google-map__locateIcon___O8k2g",n="google-map__locateIconBtn___DmBgQ",s="google-map__mapAddress___lLOgh",c="google-map__mapCompWrap___kgcWp",i="google-map__mapWrapper___YR7HM",_="google-map__searchAutoIcon___pczP8",u="google-map__skeleton___whDH9"},4180:t=>{t.exports=e},447:e=>{e.exports=t},9155:e=>{e.exports=a},8536:e=>{e.exports=o}},r={};function __webpack_require__(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return l[e](a,a.exports,__webpack_require__),a.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{__webpack_require__.r(n),__webpack_require__.d(n,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var e=__webpack_require__(9155),t=__webpack_require__.n(e),a=__webpack_require__(4180),o=__webpack_require__(958),l=__webpack_require__(8536),r=__webpack_require__.n(l),s=__webpack_require__(1758),c=__webpack_require__(8564),i=__webpack_require__(447);const _={width:"100%",height:"300px"},u={width:"100%",height:"40px",borderRadius:"8px",padding:"0px 30px",border:"none"},__WEBPACK_DEFAULT_EXPORT__=l=>{let{mapApiKey:n,onAddressSelect:p,countryDetails:d,addressItem:g,onLoad:m=(()=>{})}=l;const{t:y}=(0,i.useGlobalTranslation)("translation"),f=!g,b=19.076,h=72.8777,v=(()=>{try{const e=localStorage.getItem("lastMapLocation");return e?JSON.parse(e):null}catch{return null}})(),w={lat:Number(g?.geo_location?.latitude||v?.lat||d?.latitude||b),lng:Number(g?.geo_location?.longitude||v?.lng||d?.longitude||h)},[q,k]=(0,e.useState)({lat:w.lat,lng:w.lng}),[E,x]=(0,e.useState)(""),[S,N]=(0,e.useState)(""),[j,A]=(0,e.useState)(""),[O,M]=(0,e.useState)(""),[T,P]=(0,e.useState)(""),[C,L]=(0,e.useState)(""),[Q,$]=(0,e.useState)(d?.display_name||"India"),I=(0,e.useRef)(null),R=(0,e.useRef)(null),z=(0,e.useRef)(!1),W=(0,e.useRef)(null),{isLoaded:B}=(0,a.useJsApiLoader)({googleMapsApiKey:n,id:"google-maps-script",libraries:["places"]});function selectAddress(e){p(e||{city:S,area_code:O,state:j,area:T,address:C,country:Q,geo_location:{latitude:q?.lat,longitude:q?.lng}})}(0,e.useEffect)((()=>{if(g?.geo_location){const e={lat:Number(g?.geo_location?.latitude),lng:Number(g?.geo_location?.longitude)};k(e),R?.current?.panTo(e)}else{const e=f?{lat:19.076,lng:72.8777}:{lat:Number(d?.latitude),lng:Number(d?.longitude)};k(e),R?.current?.panTo(e)}}),[d,g,f]);const D=(0,e.useCallback)((e=>{if(e?.geometry){const t=e?.geometry?.location,a=t.lat(),o=t.lng();k({lat:a,lng:o});try{localStorage.setItem("lastMapLocation",JSON.stringify({lat:a,lng:o}))}catch(e){console.error("Failed to save location:",e)}x(e.formatted_address);let l=e?.address_components?.find((e=>e?.types?.includes("premise")));L(l?.long_name||""),getCityAndState(a,o)}else console.error("No geometry available for selected place")}),[]),getCityAndState=async(e,t)=>{try{const a=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&key=${n}`),o=(await a.json()).results[0].address_components;!function stateReset(){M(""),N(""),P(""),A("")}();let l=[],r="",s=Q||"",c="",i="",_="";o.forEach((e=>{e.types.includes("plus_code")||e.types.includes("premise")?r=e.long_name:e.types.includes("street_number")?r=`${r}${e.long_name}`:e.types.includes("country")?s=e.long_name:e.types.includes("locality")?c=e.long_name:e.types.includes("administrative_area_level_1")?i=e.long_name:e.types.includes("postal_code")?_=e.long_name:(e.types.includes("sublocality")||e.types.includes("sublocality_level_1")||e.types.includes("sublocality_level_2"))&&l.push(e.long_name)}));const u=l.join(", ");L(r),$(s),N(c),A(i),M(_),P(u),selectAddress({city:c,area_code:_,state:i,area:u,address:r,country:s,geo_location:{latitude:e,longitude:t}})}catch(e){console.error("Error fetching city and state:",e)}},getAddressFromLatLng=async(e,t)=>{try{const a=`${Number(e).toFixed(6)},${Number(t).toFixed(6)}`;if(W.current===a)return;const o=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&key=${n}`),l=await o.json();let r=[];if(l.results&&l.results.length>0){const o=l.results[0];x(o.formatted_address);let n=e,s=t;if(o?.geometry){const e=o?.geometry?.location;n=e.lat,s=e.lng,k({lat:n,lng:s})}let c="",i=Q||"",_="",u="",p="";o.address_components.forEach((e=>{e.types.includes("premise")&&(c=e.long_name),e.types.includes("country")&&(i=e.long_name),e.types.includes("locality")&&(_=e.long_name),e.types.includes("administrative_area_level_1")&&(u=e.long_name),e.types.includes("postal_code")&&(p=e.long_name),(e.types.includes("sublocality")||e.types.includes("sublocality_level_1")||e.types.includes("sublocality_level_2"))&&r.push(e.long_name)}));const d=r.join(", "),g={city:_,area_code:p,state:u,area:d,address:c,country:i,geo_location:{latitude:n,longitude:s}};L(c),$(i),N(_),A(u),M(p),P(d),selectAddress(g),W.current=a}}catch(e){console.error("Error fetching address:",e)}},F=(0,e.useCallback)((e=>{const t=e.latLng.lat(),a=e.latLng.lng();k({lat:t,lng:a});try{localStorage.setItem("lastMapLocation",JSON.stringify({lat:t,lng:a}))}catch(e){console.error("Failed to save location:",e)}getAddressFromLatLng(t,a)}),[]),handleLocationError=e=>{console.error(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")};return(0,e.useEffect)((()=>{B&&f&&(z.current||(z.current=!0,q?.lat&&q?.lng&&getAddressFromLatLng(q.lat,q.lng)))}),[B]),t().createElement("div",{className:o.v0},t().createElement("div",{className:o.Qn,style:_},B?t().createElement("div",null,t().createElement("div",{ref:I,className:o.NW,style:{display:!B&&"none"}},t().createElement(s.A,{className:o.j2}),t().createElement(r(),{placeholder:y("resource.localization.search_google_maps"),apiKey:n,style:u,onPlaceSelected:D,options:{types:["geocode","establishment"],componentRestrictions:{country:d?.iso2}},onClick:e=>{e.stopPropagation()}})),t().createElement("div",{className:o.Uu,style:{display:!B&&"none"}},t().createElement(a.GoogleMap,{mapContainerStyle:_,center:q,zoom:q?15:10,options:{fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1},onLoad:e=>{R.current=e,m(e)}},q&&t().createElement(a.Marker,{position:q,draggable:!0,onDragEnd:F})),t().createElement("button",{title:y("resource.localization.detect_my_location"),onClick:()=>{navigator?.geolocation?navigator?.geolocation?.getCurrentPosition((e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};k(t);try{localStorage.setItem("lastMapLocation",JSON.stringify(t))}catch(e){console.error("Failed to save location:",e)}getAddressFromLatLng(t.lat,t.lng),R?.current?.panTo(t)}),(()=>{handleLocationError(!0)})):handleLocationError(!1)},className:o.mB},t().createElement(c.A,{className:o.A})))):t().createElement("div",{className:o.qV},t().createElement("canvas",null))),E&&t().createElement("div",{className:o.P},t().createElement("p",null,E)))}})(),n})()));
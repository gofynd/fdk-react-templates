!function webpackUniversalModuleDefinition(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("fdk-core/utils"),require("react")):"function"==typeof define&&define.amd?define("firestone",["fdk-core/utils","react"],r):"object"==typeof exports?exports.firestone=r(require("fdk-core/utils"),require("react")):e.firestone=r(e["fdk-core/utils"],e.react)}("undefined"!=typeof self?self:this,(e,r)=>(()=>{"use strict";var t={447:r=>{r.exports=e},4062:(e,r,t)=>{t.d(r,{Dn:()=>n,ar:()=>a});var a="apple-login-button__apple-login-button___bv6AQ",n="apple-login-button__apple-login-container___QDt06"},9155:e=>{e.exports=r}},a={};function __webpack_require__(e){var r=a[e];if(void 0!==r)return r.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};__webpack_require__.r(n),__webpack_require__.d(n,{default:()=>apple_login_button});var o=__webpack_require__(9155),i=__webpack_require__.n(o),l=__webpack_require__(4062),c=__webpack_require__(447);const randomString=(e=16)=>[...crypto.getRandomValues(new Uint8Array(e))].map(e=>("0"+(255&e).toString(16)).slice(-2)).join(""),apple_login_button=({appleClientId:e="",redirectURI:r="",scope:t="name email",usePopup:a=!0,onAppleCredential:n,onError:p,className:_="",disabled:s=!1})=>{const[u,d]=(0,o.useState)(!1),[f,w]=(0,o.useState)(null),b=(0,o.useRef)(!0),m=(0,c.useFPI)(),g=(0,c.useGlobalStore)(m?.getters?.i18N_DETAILS)||{},y=g?.language?.locale||"en-US";(0,o.useEffect)(()=>(b.current=!0,(async()=>{try{w(null),await new Promise((e,r)=>{if(window.AppleID?.auth)return e();const t=document.createElement("script");t.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",t.async=!0,t.defer=!0,t.onload=()=>e(),t.onerror=()=>r(new Error("Failed to load Apple SDK")),document.head.appendChild(t)});const n=randomString(),o=randomString();window.AppleID.auth.init({clientId:e,scope:t,redirectURI:r,state:n,nonce:o,usePopup:a,locale:y}),b.current&&d(!0)}catch(e){console.error(e),b.current&&(w(e.message),d(!1),p?.(e))}})(),()=>{b.current=!1}),[e,r,t,a,y]);return i().createElement("div",{className:l.Dn},i().createElement("button",{className:l.ar,onClick:async()=>{if(u&&!s)try{const e=await window.AppleID.auth.signIn();await(n?.(e))}catch(e){console.warn("Apple sign-in cancelled/failed:",e),w(e?.message||"Apple sign-in was cancelled"),p?.(e)}},disabled:!u||s},i().createElement("svg",{width:"20",height:"20",viewBox:"0 0 384 512",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},i().createElement("path",{fill:"currentColor",d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"})),i().createElement("span",null,"Sign in with Apple")),f?i().createElement("div",{style:{marginTop:8,fontSize:12,color:"var(--error, #c62828)"}},f):null)};return n})());